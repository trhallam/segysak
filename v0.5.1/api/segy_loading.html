
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="SEGY file loading in Python using Xarray">
      
      
        <meta name="author" content="Tony Hallam">
      
      
        <link rel="canonical" href="https://segysak.readthedocs.io/latest/api/segy_loading.html">
      
      
        <link rel="prev" href="utils.html">
      
      
        <link rel="next" href="segy_writing.html">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.27">
    
    
      
        <title>Depreciated Loading SEG-Y - SEGY-SAK Documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/fix-xarray-rep.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#segysak.segy.segy_loader" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
You're not viewing the latest version.
<a href="../..">
    <strong>Click here to go to latest.</strong>
</a>

            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="SEGY-SAK Documentation" class="md-header__button md-logo" aria-label="SEGY-SAK Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SEGY-SAK Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Depreciated Loading SEG-Y
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/trhallam/segysak" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    trhallam/segysak
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../index.html" class="md-tabs__link">
          
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../examples_about.html" class="md-tabs__link">
          
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../cli/about.html" class="md-tabs__link">
          
  
  CLI

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../tutorial.html" class="md-tabs__link">
        
  
    
  
  Tutorial

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../meta/faq.html" class="md-tabs__link">
          
  
  Meta

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../api.html" class="md-tabs__link">
          
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="SEGY-SAK Documentation" class="md-nav__button md-logo" aria-label="SEGY-SAK Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    SEGY-SAK Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/trhallam/segysak" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    trhallam/segysak
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Home
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Walkthrough
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            Walkthrough
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../quickstart.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../upgrading.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrading to v0.5
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Learn
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            Learn
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../why-segysak.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Why SEGYSAK
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../seisnc.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Xarray SEISNC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../history.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    History
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Community
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            Community
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/trhallam/segysak/discussions" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Discussions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/trhallam/segysak/issues" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Issue Tracker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples_about.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/QuickOverview.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/example_segysak_basics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SEGY-SAK Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/example_segy_headers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with SEG-Y headers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/example_extract_arbitrary_line.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extract an arbitrary line from a 3D volume
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/example_amplitude_extraction_displays.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with seismic and interpreted horizons
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/example_extract_data_on_a_horizon.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extract data at the intersection of a horizon and 3D volume
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/example_segysak_segy_vectorisation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SEG-Y to Vector DataFrames and Back
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/example_working_with_3d_gathers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Working with 3D Gathers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/example_merge_surveys.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Merging Seismic Data Cubes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/example_segysak_dask.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using dask
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CLI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            CLI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/about.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cli/command-line-ref.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Meta
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Meta
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../meta/faq.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../seisnc-standard.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SEISNC conventions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="segy_inspecting.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inspecting SEG-Y
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="segy_text.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SEG-Y text header operations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="segy_xarray.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SEG-Y via Xarray
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="xarray_new.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Xarray Accessor modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="geometry.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Survey Geometry
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="utils.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Package Utils
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Depreciated Loading SEG-Y
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="segy_loading.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Depreciated Loading SEG-Y
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#segysak.segy.segy_loader" class="md-nav__link">
    <span class="md-ellipsis">
      segy_loader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#segysak.segy.segy_freeloader" class="md-nav__link">
    <span class="md-ellipsis">
      segy_freeloader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#segysak.segy.segy_converter" class="md-nav__link">
    <span class="md-ellipsis">
      segy_converter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#segysak.segy.well_known_byte_locs" class="md-nav__link">
    <span class="md-ellipsis">
      well_known_byte_locs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="segy_writing.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Depreciated Writing SEG-Y
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="xarray_accessor.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Depreciated Xarray Accessor modules
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#segysak.segy.segy_loader" class="md-nav__link">
    <span class="md-ellipsis">
      segy_loader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#segysak.segy.segy_freeloader" class="md-nav__link">
    <span class="md-ellipsis">
      segy_freeloader
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#segysak.segy.segy_converter" class="md-nav__link">
    <span class="md-ellipsis">
      segy_converter
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#segysak.segy.well_known_byte_locs" class="md-nav__link">
    <span class="md-ellipsis">
      well_known_byte_locs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  

  
    <a href="https://github.com/trhallam/segysak/edit/main/docs/api/segy_loading.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/trhallam/segysak/raw/main/docs/api/segy_loading.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


  <h1>Depreciated Loading SEG-Y</h1>

<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These methods have been depreciated in favour of the direct Xarray backend engine interface.
Examples in this documentation have been updated to use the backend engine or consult the
Backend Engine <a href="segy_xarray.html">reference</a>.</p>
</div>


<div class="doc doc-object doc-module">




    <div class="doc doc-contents first">



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="segysak.segy.segy_loader" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">segy_loader</span><span class="p">(</span><span class="n">segyfile</span><span class="p">,</span> <span class="n">cdp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">iline</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xline</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cdp_x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cdp_y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vert_domain</span><span class="o">=</span><span class="s1">&#39;TWT&#39;</span><span class="p">,</span> <span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;AMP&#39;</span><span class="p">,</span> <span class="n">ix_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cdp_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">z_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_geometry</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">extra_byte_fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">head_df</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Load SEG-Y file into xarray.Dataset</p>
<p>The output dataset has the following structure
    Dimensions:
        cdp/iline - CDP or Inline axis
        xline - Xline axis
        twt/depth - The vertical axis
        offset - Offset/Angle Axis
    Coordinates:
        iline - The inline numbering
        xline - The xline numbering
        cdp_x - Eastings
        cdp_y - Northings
        cdp - Trace Number for 2d
    Variables
        data - The data volume
    Attributes:
        ns - number of samples vertical
        sample_rate - sample rate in ms/m
        test - text header
        measurement_system : m/ft
        source_file : segy source
        srd : seismic reference datum
        percentiles : data amplitude percentiles
        coord_scalar : from trace headers</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>segyfile</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input segy file path</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>cdp</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The CDP byte location, usually 21.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>iline</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Inline byte location, usually 189</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>xline</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Cross-line byte location, usually 193</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>cdp_x</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>UTMX byte location, usually 181</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>cdp_y</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>UTMY byte location, usually 185</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>offset</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Offset/angle byte location</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>vert_domain</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Vertical sampling domain. One of ['TWT', 'DEPTH']. Defaults to 'TWT'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;TWT&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>data_type</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data type ['AMP', 'VEL']. Defaults to 'AMP'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;AMP&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ix_crop</code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of minimum and maximum inline and crossline to output.
Has the form '[min_il, max_il, min_xl, max_xl]'. Ignored for 2D data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>cdp_crop</code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of minimum and maximum cmp values to output.
Has the form '[min_cmp, max_cmp]'. Ignored for 3D data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>xy_crop</code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of minimum and maximum cdp_x and cdp_y to output.
Has the form '[min_x, max_x, min_y, max_y]'. Ignored for 2D data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>z_crop</code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of minimum and maximum vertical samples to output.
Has the form '[min, max]'.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>return_geometry</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If true returns an xarray.dataset which doesn't contain data but mirrors
the input volume header information.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>extra_byte_fields</code></td>
            <td>
                  <code>list / mapping</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of int or mapping of byte fields that should be returned as variables in the dataset.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>head_df</code></td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The DataFrame output from <code>segy_header_scrape</code>. This DataFrame can be filtered by the user
to load select trace sets. Trace loading is based upon the DataFrame index.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>**segyio_kwargs</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra keyword arguments for segyio.open</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>xarray.Dataset: If ncfile keyword is specified returns open handle to disk netcdf4,
otherwise the data in memory. If return_geometry is True does not load trace data and
returns headers in geometry.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>segysak/segy/_segy_loader.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">segy_loader</span><span class="p">(</span>
    <span class="n">segyfile</span><span class="p">,</span>
    <span class="n">cdp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">iline</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">xline</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">cdp_x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">cdp_y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vert_domain</span><span class="o">=</span><span class="s2">&quot;TWT&quot;</span><span class="p">,</span>
    <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;AMP&quot;</span><span class="p">,</span>
    <span class="n">ix_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">cdp_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">xy_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">z_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">return_geometry</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">extra_byte_fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">head_df</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load SEG-Y file into xarray.Dataset</span>

<span class="sd">    The output dataset has the following structure</span>
<span class="sd">        Dimensions:</span>
<span class="sd">            cdp/iline - CDP or Inline axis</span>
<span class="sd">            xline - Xline axis</span>
<span class="sd">            twt/depth - The vertical axis</span>
<span class="sd">            offset - Offset/Angle Axis</span>
<span class="sd">        Coordinates:</span>
<span class="sd">            iline - The inline numbering</span>
<span class="sd">            xline - The xline numbering</span>
<span class="sd">            cdp_x - Eastings</span>
<span class="sd">            cdp_y - Northings</span>
<span class="sd">            cdp - Trace Number for 2d</span>
<span class="sd">        Variables</span>
<span class="sd">            data - The data volume</span>
<span class="sd">        Attributes:</span>
<span class="sd">            ns - number of samples vertical</span>
<span class="sd">            sample_rate - sample rate in ms/m</span>
<span class="sd">            test - text header</span>
<span class="sd">            measurement_system : m/ft</span>
<span class="sd">            source_file : segy source</span>
<span class="sd">            srd : seismic reference datum</span>
<span class="sd">            percentiles : data amplitude percentiles</span>
<span class="sd">            coord_scalar : from trace headers</span>

<span class="sd">    Args:</span>
<span class="sd">        segyfile (str): Input segy file path</span>
<span class="sd">        cdp (int, optional): The CDP byte location, usually 21.</span>
<span class="sd">        iline (int, optional): Inline byte location, usually 189</span>
<span class="sd">        xline (int, optional): Cross-line byte location, usually 193</span>
<span class="sd">        cdp_x (int, optional): UTMX byte location, usually 181</span>
<span class="sd">        cdp_y (int, optional): UTMY byte location, usually 185</span>
<span class="sd">        offset (int, optional): Offset/angle byte location</span>
<span class="sd">        vert_domain (str, optional): Vertical sampling domain. One of [&#39;TWT&#39;, &#39;DEPTH&#39;]. Defaults to &#39;TWT&#39;.</span>
<span class="sd">        data_type (str, optional): Data type [&#39;AMP&#39;, &#39;VEL&#39;]. Defaults to &#39;AMP&#39;.</span>
<span class="sd">        ix_crop (list, optional): List of minimum and maximum inline and crossline to output.</span>
<span class="sd">            Has the form &#39;[min_il, max_il, min_xl, max_xl]&#39;. Ignored for 2D data.</span>
<span class="sd">        cdp_crop (list, optional): List of minimum and maximum cmp values to output.</span>
<span class="sd">            Has the form &#39;[min_cmp, max_cmp]&#39;. Ignored for 3D data.</span>
<span class="sd">        xy_crop (list, optional): List of minimum and maximum cdp_x and cdp_y to output.</span>
<span class="sd">            Has the form &#39;[min_x, max_x, min_y, max_y]&#39;. Ignored for 2D data.</span>
<span class="sd">        z_crop (list, optional): List of minimum and maximum vertical samples to output.</span>
<span class="sd">            Has the form &#39;[min, max]&#39;.</span>
<span class="sd">        return_geometry (bool, optional): If true returns an xarray.dataset which doesn&#39;t contain data but mirrors</span>
<span class="sd">            the input volume header information.</span>
<span class="sd">        extra_byte_fields (list/mapping): A list of int or mapping of byte fields that should be returned as variables in the dataset.</span>
<span class="sd">        head_df (pandas.DataFrame): The DataFrame output from `segy_header_scrape`. This DataFrame can be filtered by the user</span>
<span class="sd">            to load select trace sets. Trace loading is based upon the DataFrame index.</span>
<span class="sd">        **segyio_kwargs: Extra keyword arguments for segyio.open</span>

<span class="sd">    Returns:</span>
<span class="sd">        xarray.Dataset: If ncfile keyword is specified returns open handle to disk netcdf4,</span>
<span class="sd">            otherwise the data in memory. If return_geometry is True does not load trace data and</span>
<span class="sd">            returns headers in geometry.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">warn</span><span class="p">(</span>
        <span class="s2">&quot;segy_loader will be removed in v0.6, please use the Xarray engine ds = xr.open_dataset(segy_file) method instead.&quot;</span><span class="p">,</span>
        <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">extra_byte_fields</span> <span class="o">=</span> <span class="n">_loader_converter_checks</span><span class="p">(</span><span class="n">cdp</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">xline</span><span class="p">,</span> <span class="n">extra_byte_fields</span><span class="p">)</span>

    <span class="n">head_df</span><span class="p">,</span> <span class="n">head_bin</span><span class="p">,</span> <span class="n">head_loc</span> <span class="o">=</span> <span class="n">_loader_converter_header_handling</span><span class="p">(</span>
        <span class="n">segyfile</span><span class="p">,</span>
        <span class="n">cdp</span><span class="o">=</span><span class="n">cdp</span><span class="p">,</span>
        <span class="n">iline</span><span class="o">=</span><span class="n">iline</span><span class="p">,</span>
        <span class="n">xline</span><span class="o">=</span><span class="n">xline</span><span class="p">,</span>
        <span class="n">cdp_x</span><span class="o">=</span><span class="n">cdp_x</span><span class="p">,</span>
        <span class="n">cdp_y</span><span class="o">=</span><span class="n">cdp_y</span><span class="p">,</span>
        <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
        <span class="n">vert_domain</span><span class="o">=</span><span class="n">vert_domain</span><span class="p">,</span>
        <span class="n">data_type</span><span class="o">=</span><span class="n">data_type</span><span class="p">,</span>
        <span class="n">ix_crop</span><span class="o">=</span><span class="n">ix_crop</span><span class="p">,</span>
        <span class="n">cdp_crop</span><span class="o">=</span><span class="n">cdp_crop</span><span class="p">,</span>
        <span class="n">xy_crop</span><span class="o">=</span><span class="n">xy_crop</span><span class="p">,</span>
        <span class="n">z_crop</span><span class="o">=</span><span class="n">z_crop</span><span class="p">,</span>
        <span class="n">return_geometry</span><span class="o">=</span><span class="n">return_geometry</span><span class="p">,</span>
        <span class="n">silent</span><span class="o">=</span><span class="n">Progress</span><span class="o">.</span><span class="n">silent</span><span class="p">(),</span>
        <span class="n">extra_byte_fields</span><span class="o">=</span><span class="n">extra_byte_fields</span><span class="p">,</span>
        <span class="n">head_df</span><span class="o">=</span><span class="n">head_df</span><span class="p">,</span>
        <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">byte_loc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">bytel</span>
        <span class="k">for</span> <span class="n">bytel</span> <span class="ow">in</span> <span class="p">[</span><span class="n">cdp</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">xline</span><span class="p">,</span> <span class="n">cdp_x</span><span class="p">,</span> <span class="n">cdp_y</span><span class="p">,</span> <span class="n">offset</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">bytel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">]</span>
    <span class="n">check_tracefield</span><span class="p">(</span><span class="n">byte_loc</span><span class="p">)</span>

    <span class="n">common_args</span> <span class="o">=</span> <span class="p">(</span><span class="n">segyfile</span><span class="p">,</span> <span class="n">head_df</span><span class="p">,</span> <span class="n">head_bin</span><span class="p">,</span> <span class="n">head_loc</span><span class="p">)</span>

    <span class="n">common_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">zcrop</span><span class="o">=</span><span class="n">z_crop</span><span class="p">,</span>
        <span class="n">vert_domain</span><span class="o">=</span><span class="n">vert_domain</span><span class="p">,</span>
        <span class="n">data_type</span><span class="o">=</span><span class="n">data_type</span><span class="p">,</span>
        <span class="n">return_geometry</span><span class="o">=</span><span class="n">return_geometry</span><span class="p">,</span>
        <span class="n">silent</span><span class="o">=</span><span class="n">Progress</span><span class="o">.</span><span class="n">silent</span><span class="p">(),</span>
    <span class="p">)</span>

    <span class="c1"># 3d data needs iline and xline</span>
    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="p">(</span><span class="n">head_loc</span><span class="o">.</span><span class="n">iline</span><span class="p">,</span> <span class="n">head_loc</span><span class="o">.</span><span class="n">xline</span><span class="p">)):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loading as 3D&quot;</span><span class="p">)</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">_3dsegy_loader</span><span class="p">(</span>
            <span class="o">*</span><span class="n">common_args</span><span class="p">,</span>
            <span class="o">**</span><span class="n">common_kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">indexer</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;il_index&quot;</span><span class="p">,</span> <span class="s2">&quot;xl_index&quot;</span><span class="p">]</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">DimensionKeyField</span><span class="o">.</span><span class="n">threed_head</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="n">DimensionKeyField</span><span class="o">.</span><span class="n">threed_ps_head</span>
        <span class="p">)</span>
        <span class="n">is3d2d</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># 2d data</span>
    <span class="k">elif</span> <span class="n">head_loc</span><span class="o">.</span><span class="n">cdp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Loading as 2D&quot;</span><span class="p">)</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">_2dsegy_loader</span><span class="p">(</span><span class="o">*</span><span class="n">common_args</span><span class="p">,</span> <span class="o">**</span><span class="n">common_kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">)</span>
        <span class="n">indexer</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;cdp_index&quot;</span><span class="p">]</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">DimensionKeyField</span><span class="o">.</span><span class="n">twod_head</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="n">DimensionKeyField</span><span class="o">.</span><span class="n">twod_ps_head</span>
        <span class="p">)</span>
        <span class="n">is3d2d</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># fallbak to just a 2d array of traces</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">_2dsegy_loader</span><span class="p">(</span><span class="o">*</span><span class="n">common_args</span><span class="p">,</span> <span class="o">**</span><span class="n">common_kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">)</span>
        <span class="n">indexer</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="n">DimensionKeyField</span><span class="o">.</span><span class="n">cdp_2d</span>
        <span class="n">is3d2d</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">indexer</span> <span class="o">=</span> <span class="n">indexer</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;off_index&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">indexer</span>

    <span class="n">ds</span> <span class="o">=</span> <span class="n">_loader_converter_write_headers</span><span class="p">(</span>
        <span class="n">ds</span><span class="p">,</span> <span class="n">head_df</span><span class="p">,</span> <span class="n">indexer</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="n">extra_byte_fields</span><span class="p">,</span> <span class="n">is3d2d</span><span class="o">=</span><span class="n">is3d2d</span>
    <span class="p">)</span>

    <span class="c1"># ds.seis.get_corner_points()</span>
    <span class="k">return</span> <span class="n">ds</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="segysak.segy.segy_freeloader" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">segy_freeloader</span><span class="p">(</span><span class="n">segyfile</span><span class="p">,</span> <span class="n">vert_domain</span><span class="o">=</span><span class="s1">&#39;TWT&#39;</span><span class="p">,</span> <span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;AMP&#39;</span><span class="p">,</span> <span class="n">return_geometry</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">extra_byte_fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">head_df</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">segyio_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">dim_kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Freeform loader for SEG-Y data. This loader allows you to load SEG-Y into
an xarray.Dataset using an arbitrary number of header locations to create
othogonal dimensions. This is an eager loader and will transfer the entire
SEG-Y and requested header information to memory.</p>
<p>From the dimension header locations specified the freeloader will try to
create a Dataset where each trace is assigned to a dimension.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>segyfile</code></td>
            <td>
                  <code>string</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The SEG-Y file/path.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>vert_domain</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>One of ('TWT', 'DEPTH'). Defaults to 'TWT'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;TWT&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>data_type</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Defaults to "AMP".</p>
              </div>
            </td>
            <td>
                  <code>&#39;AMP&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>return_geometry</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If true, just returned the empty
dataset based upon the calcuated header geometry. Defaults to False.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>extra_byte_fields</code></td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Additional header information to
load into the Dataset. Defaults to None.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>head_df</code></td>
            <td>
                  <code><span title="pandas.DataFrame">DataFrame</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The DataFrame output from <code>segy_header_scrape</code>.
This DataFrame can be filtered by the user
to load select trace sets. Trace loading is based upon the DataFrame index.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>segyio_kwargs</code></td>
            <td>
                  <code>dict</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra keyword arguments for segyio.open</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>**dim_kwargs</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dimension names and byte location pairs.</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>segysak/segy/_segy_loader.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">segy_freeloader</span><span class="p">(</span>
    <span class="n">segyfile</span><span class="p">,</span>
    <span class="n">vert_domain</span><span class="o">=</span><span class="s2">&quot;TWT&quot;</span><span class="p">,</span>
    <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;AMP&quot;</span><span class="p">,</span>
    <span class="n">return_geometry</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">extra_byte_fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">head_df</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">segyio_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">dim_kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Freeform loader for SEG-Y data. This loader allows you to load SEG-Y into</span>
<span class="sd">    an xarray.Dataset using an arbitrary number of header locations to create</span>
<span class="sd">    othogonal dimensions. This is an eager loader and will transfer the entire</span>
<span class="sd">    SEG-Y and requested header information to memory.</span>

<span class="sd">    From the dimension header locations specified the freeloader will try to</span>
<span class="sd">    create a Dataset where each trace is assigned to a dimension.</span>

<span class="sd">    Args:</span>
<span class="sd">        segyfile (string): The SEG-Y file/path.</span>
<span class="sd">        vert_domain (str, optional): One of (&#39;TWT&#39;, &#39;DEPTH&#39;). Defaults to &#39;TWT&#39;.</span>
<span class="sd">        data_type (str, optional): Defaults to &quot;AMP&quot;.</span>
<span class="sd">        return_geometry (bool, optional): If true, just returned the empty</span>
<span class="sd">            dataset based upon the calcuated header geometry. Defaults to False.</span>
<span class="sd">        extra_byte_fields (dict, optional): Additional header information to</span>
<span class="sd">            load into the Dataset. Defaults to None.</span>
<span class="sd">        head_df (pandas.DataFrame): The DataFrame output from `segy_header_scrape`.</span>
<span class="sd">            This DataFrame can be filtered by the user</span>
<span class="sd">            to load select trace sets. Trace loading is based upon the DataFrame index.</span>
<span class="sd">        segyio_kwargs (dict, optional): Extra keyword arguments for segyio.open</span>
<span class="sd">        **dim_kwargs: Dimension names and byte location pairs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">warn</span><span class="p">(</span>
        <span class="s2">&quot;segy_loader will be removed in v0.6, please use the Xarray engine ds = xr.open_dataset(segy_file) method instead.&quot;</span><span class="p">,</span>
        <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">segyio_kwargs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">segyio_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">head_df</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># Start by scraping the headers.</span>
        <span class="n">head_df</span> <span class="o">=</span> <span class="n">segy_header_scrape</span><span class="p">(</span><span class="n">segyfile</span><span class="p">,</span> <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">)</span>

    <span class="n">head_bin</span> <span class="o">=</span> <span class="n">segy_bin_scrape</span><span class="p">(</span><span class="n">segyfile</span><span class="p">,</span> <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">)</span>

    <span class="c1"># get vertical sample ranges</span>
    <span class="n">n0</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">nsamp</span> <span class="o">=</span> <span class="n">head_bin</span><span class="p">[</span><span class="s2">&quot;Samples&quot;</span><span class="p">]</span>
    <span class="n">ns0</span> <span class="o">=</span> <span class="n">head_df</span><span class="o">.</span><span class="n">DelayRecordingTime</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>

    <span class="c1"># binary header translation</span>
    <span class="n">nsamp</span> <span class="o">=</span> <span class="n">head_bin</span><span class="p">[</span><span class="s2">&quot;Samples&quot;</span><span class="p">]</span>
    <span class="n">sample_rate</span> <span class="o">=</span> <span class="n">head_bin</span><span class="p">[</span><span class="s2">&quot;Interval&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="mf">1000.0</span>
    <span class="n">msys</span> <span class="o">=</span> <span class="n">_SEGY_MEASUREMENT_SYSTEM</span><span class="p">[</span><span class="n">head_bin</span><span class="p">[</span><span class="s2">&quot;MeasurementSystem&quot;</span><span class="p">]]</span>
    <span class="n">vert_samples</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">ns0</span><span class="p">,</span> <span class="n">ns0</span> <span class="o">+</span> <span class="n">sample_rate</span> <span class="o">*</span> <span class="n">nsamp</span><span class="p">,</span> <span class="n">sample_rate</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>

    <span class="c1"># creating dimensions and new dataset</span>
    <span class="n">dims</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">dim_index_names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">dim_fields</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">dim</span> <span class="ow">in</span> <span class="n">dim_kwargs</span><span class="p">:</span>
        <span class="n">trace_field</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">segyio</span><span class="o">.</span><span class="n">TraceField</span><span class="p">(</span><span class="n">dim_kwargs</span><span class="p">[</span><span class="n">dim</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">trace_field</span> <span class="o">==</span> <span class="s2">&quot;Unknown Enum&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dim</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">dim_kwargs</span><span class="p">[</span><span class="n">dim</span><span class="p">]</span><span class="si">}</span><span class="s2"> was not a valid byte header&quot;</span><span class="p">)</span>
        <span class="n">dim_fields</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trace_field</span><span class="p">)</span>
        <span class="n">as_unique</span> <span class="o">=</span> <span class="n">head_df</span><span class="p">[</span><span class="n">trace_field</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
        <span class="n">dims</span><span class="p">[</span><span class="n">dim</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">as_unique</span><span class="p">)</span>
        <span class="n">d_map</span> <span class="o">=</span> <span class="p">{</span><span class="n">dval</span><span class="p">:</span> <span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">dval</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">as_unique</span><span class="p">)}</span>
        <span class="n">index_name</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">dim</span><span class="si">}</span><span class="s2">_index&quot;</span>
        <span class="n">dim_index_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">index_name</span><span class="p">)</span>
        <span class="n">head_df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">index_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">head_df</span><span class="p">[</span><span class="n">trace_field</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">d_map</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="n">head_df</span><span class="p">[</span><span class="n">dim_index_names</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span>
        <span class="o">!=</span> <span class="n">head_df</span><span class="p">[</span><span class="n">dim_index_names</span><span class="p">]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;The selected dimensions results in multiple traces per &quot;</span>
            <span class="s2">&quot;dimension location, add additional dimensions or use &quot;</span>
            <span class="s2">&quot;trace numbering to load as 2D.&quot;</span>
        <span class="p">)</span>

    <span class="n">builder</span><span class="p">,</span> <span class="n">domain</span> <span class="o">=</span> <span class="n">_dataset_coordinate_helper</span><span class="p">(</span><span class="n">vert_samples</span><span class="p">,</span> <span class="n">vert_domain</span><span class="p">,</span> <span class="o">**</span><span class="n">dims</span><span class="p">)</span>
    <span class="n">ds</span> <span class="o">=</span> <span class="n">create_seismic_dataset</span><span class="p">(</span><span class="o">**</span><span class="n">builder</span><span class="p">)</span>

    <span class="c1"># getting attributes</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">get_segy_texthead</span><span class="p">(</span><span class="n">segyfile</span><span class="p">,</span> <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">)</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="n">AttrKeyField</span><span class="o">.</span><span class="n">text</span><span class="p">]</span> <span class="o">=</span> <span class="n">text</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="n">AttrKeyField</span><span class="o">.</span><span class="n">source_file</span><span class="p">]</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">segyfile</span><span class="p">)</span><span class="o">.</span><span class="n">name</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="n">AttrKeyField</span><span class="o">.</span><span class="n">measurement_system</span><span class="p">]</span> <span class="o">=</span> <span class="n">msys</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="n">AttrKeyField</span><span class="o">.</span><span class="n">sample_rate</span><span class="p">]</span> <span class="o">=</span> <span class="n">sample_rate</span>

    <span class="c1"># map extra byte fields into ds</span>
    <span class="k">if</span> <span class="n">extra_byte_fields</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">to_add</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">byte</span> <span class="ow">in</span> <span class="n">extra_byte_fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">trace_field</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">segyio</span><span class="o">.</span><span class="n">TraceField</span><span class="p">(</span><span class="n">byte</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">trace_field</span> <span class="o">==</span> <span class="s2">&quot;Unknown Enum&quot;</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">byte</span><span class="si">}</span><span class="s2"> was not a valid byte header&quot;</span><span class="p">)</span>
            <span class="n">to_add</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">trace_field</span><span class="p">)</span>
        <span class="n">to_add</span> <span class="o">=</span> <span class="n">to_add</span> <span class="o">+</span> <span class="n">dim_fields</span>
        <span class="n">extras</span> <span class="o">=</span> <span class="n">head_df</span><span class="p">[</span><span class="n">to_add</span><span class="p">]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">dim_fields</span><span class="p">)</span><span class="o">.</span><span class="n">to_xarray</span><span class="p">()</span>
        <span class="n">extras</span> <span class="o">=</span> <span class="n">extras</span><span class="o">.</span><span class="n">rename_dims</span><span class="p">(</span>
            <span class="p">{</span><span class="n">b</span><span class="p">:</span> <span class="n">a</span> <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">dim_kwargs</span><span class="p">,</span> <span class="n">dim_fields</span><span class="p">)</span> <span class="k">if</span> <span class="n">a</span> <span class="o">!=</span> <span class="n">b</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">xtr</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">extra_byte_fields</span><span class="p">,</span> <span class="n">to_add</span><span class="p">):</span>
            <span class="n">ds</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">extras</span><span class="p">[</span><span class="n">xtr</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">return_geometry</span><span class="p">:</span>
        <span class="c1"># return geometry -&gt; e.g. don&#39;t process segy traces</span>
        <span class="k">return</span> <span class="n">ds</span>

    <span class="n">segyio_kwargs</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">ignore_geometry</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

    <span class="k">with</span> <span class="n">segyio</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">segyfile</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">)</span> <span class="k">as</span> <span class="n">segyf</span><span class="p">:</span>

        <span class="n">segyf</span><span class="o">.</span><span class="n">mmap</span><span class="p">()</span>
        <span class="n">shape</span> <span class="o">=</span> <span class="p">[</span><span class="n">ds</span><span class="o">.</span><span class="n">sizes</span><span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">dim_kwargs</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="n">vert_samples</span><span class="o">.</span><span class="n">size</span><span class="p">]</span>
        <span class="n">volume</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>

        <span class="c1"># this can probably be done as a block - leaving for now just incase sorting becomes an issue</span>
        <span class="n">indexes</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">([</span><span class="n">head_df</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="n">dim_index_names</span><span class="p">])</span>
        <span class="n">volume</span><span class="p">[</span><span class="n">indexes</span><span class="p">]</span> <span class="o">=</span> <span class="n">segyf</span><span class="o">.</span><span class="n">trace</span><span class="o">.</span><span class="n">raw</span><span class="p">[:][</span><span class="n">head_df</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">values</span><span class="p">]</span>

    <span class="n">percentiles</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">volume</span><span class="p">,</span> <span class="n">PERCENTILES</span><span class="p">)</span>
    <span class="n">ds</span><span class="p">[</span><span class="n">VariableKeyField</span><span class="o">.</span><span class="n">data</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
        <span class="nb">list</span><span class="p">(</span><span class="n">dim_kwargs</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="n">VerticalKeyDim</span><span class="p">[</span><span class="n">domain</span><span class="p">]],</span>
        <span class="n">volume</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="n">AttrKeyField</span><span class="o">.</span><span class="n">percentiles</span><span class="p">]</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">percentiles</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ds</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="segysak.segy.segy_converter" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">segy_converter</span><span class="p">(</span><span class="n">segyfile</span><span class="p">,</span> <span class="n">ncfile</span><span class="p">,</span> <span class="n">cdp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">iline</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xline</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cdp_x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cdp_y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vert_domain</span><span class="o">=</span><span class="s1">&#39;TWT&#39;</span><span class="p">,</span> <span class="n">data_type</span><span class="o">=</span><span class="s1">&#39;AMP&#39;</span><span class="p">,</span> <span class="n">ix_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cdp_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">xy_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">z_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">return_geometry</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">extra_byte_fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Convert SEG-Y data to NetCDF4 File</p>
<p>The output ncfile has the following structure
    Dimensions:
        cdp/iline - CDP or Inline axis
        xline - Xline axis
        twt/depth - The vertical axis
        offset - Offset/Angle Axis
    Coordinates:
        iline - The inline numbering
        xline - The xline numbering
        cdp_x - Eastings
        cdp_y - Northings
        cdp - Trace Number for 2d
    Variables
        data - The data volume
    Attributes:
        ns - number of samples vertical
        sample_rate - sample rate in ms/m
        test - text header
        measurement_system : m/ft
        source_file : segy source
        srd : seismic reference datum
        percentiles : data amplitude percentiles
        coord_scalar : from trace headers</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>segyfile</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input segy file path</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ncfile</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Output SEISNC file path. If none the loaded data will be
returned in memory as an xarray.Dataset.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>cdp</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The CDP byte location, usually 21.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>iline</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Inline byte location, usually 189</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>xline</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Cross-line byte location, usually 193</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>cdp_x</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>UTMX byte location, usually 181</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>cdp_y</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>UTMY byte location, usually 185</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>offset</code></td>
            <td>
                  <code>int</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Offset/angle byte location</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>vert_domain</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Vertical sampling domain. One of ['TWT', 'DEPTH']. Defaults to 'TWT'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;TWT&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>data_type</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Data type ['AMP', 'VEL']. Defaults to 'AMP'.</p>
              </div>
            </td>
            <td>
                  <code>&#39;AMP&#39;</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>ix_crop</code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of minimum and maximum inline and crossline to output.
Has the form '[min_il, max_il, min_xl, max_xl]'. Ignored for 2D data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>cdp_crop</code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of minimum and maximum cmp values to output.
Has the form '[min_cmp, max_cmp]'. Ignored for 3D data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>xy_crop</code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of minimum and maximum cdp_x and cdp_y to output.
Has the form '[min_x, max_x, min_y, max_y]'. Ignored for 2D data.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>z_crop</code></td>
            <td>
                  <code>list</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of minimum and maximum vertical samples to output.
Has the form '[min, max]'.</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>return_geometry</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If true returns an xarray.dataset which doesn't contain data but mirrors
the input volume header information.</p>
              </div>
            </td>
            <td>
                  <code>False</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>silent</code></td>
            <td>
                  <code>bool</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Disable progress bar.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>extra_byte_fields</code></td>
            <td>
                  <code>list / mapping</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A list of int or mapping of byte fields that should be returned as variables in the dataset.a</p>
              </div>
            </td>
            <td>
                  <code>None</code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code>**segyio_kwargs</code></td>
            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Extra keyword arguments for segyio.open</p>
              </div>
            </td>
            <td>
                  <code>{}</code>
            </td>
          </tr>
      </tbody>
    </table>

            <details class="quote">
              <summary>Source code in <code>segysak/segy/_segy_loader.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">segy_converter</span><span class="p">(</span>
    <span class="n">segyfile</span><span class="p">,</span>
    <span class="n">ncfile</span><span class="p">,</span>
    <span class="n">cdp</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">iline</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">xline</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">cdp_x</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">cdp_y</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vert_domain</span><span class="o">=</span><span class="s2">&quot;TWT&quot;</span><span class="p">,</span>
    <span class="n">data_type</span><span class="o">=</span><span class="s2">&quot;AMP&quot;</span><span class="p">,</span>
    <span class="n">ix_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">cdp_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">xy_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">z_crop</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">return_geometry</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">extra_byte_fields</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert SEG-Y data to NetCDF4 File</span>

<span class="sd">    The output ncfile has the following structure</span>
<span class="sd">        Dimensions:</span>
<span class="sd">            cdp/iline - CDP or Inline axis</span>
<span class="sd">            xline - Xline axis</span>
<span class="sd">            twt/depth - The vertical axis</span>
<span class="sd">            offset - Offset/Angle Axis</span>
<span class="sd">        Coordinates:</span>
<span class="sd">            iline - The inline numbering</span>
<span class="sd">            xline - The xline numbering</span>
<span class="sd">            cdp_x - Eastings</span>
<span class="sd">            cdp_y - Northings</span>
<span class="sd">            cdp - Trace Number for 2d</span>
<span class="sd">        Variables</span>
<span class="sd">            data - The data volume</span>
<span class="sd">        Attributes:</span>
<span class="sd">            ns - number of samples vertical</span>
<span class="sd">            sample_rate - sample rate in ms/m</span>
<span class="sd">            test - text header</span>
<span class="sd">            measurement_system : m/ft</span>
<span class="sd">            source_file : segy source</span>
<span class="sd">            srd : seismic reference datum</span>
<span class="sd">            percentiles : data amplitude percentiles</span>
<span class="sd">            coord_scalar : from trace headers</span>

<span class="sd">    Args:</span>
<span class="sd">        segyfile (str): Input segy file path</span>
<span class="sd">        ncfile (str): Output SEISNC file path. If none the loaded data will be</span>
<span class="sd">            returned in memory as an xarray.Dataset.</span>
<span class="sd">        cdp (int, optional): The CDP byte location, usually 21.</span>
<span class="sd">        iline (int, optional): Inline byte location, usually 189</span>
<span class="sd">        xline (int, optional): Cross-line byte location, usually 193</span>
<span class="sd">        cdp_x (int, optional): UTMX byte location, usually 181</span>
<span class="sd">        cdp_y (int, optional): UTMY byte location, usually 185</span>
<span class="sd">        offset (int, optional): Offset/angle byte location</span>
<span class="sd">        vert_domain (str, optional): Vertical sampling domain. One of [&#39;TWT&#39;, &#39;DEPTH&#39;]. Defaults to &#39;TWT&#39;.</span>
<span class="sd">        data_type (str, optional): Data type [&#39;AMP&#39;, &#39;VEL&#39;]. Defaults to &#39;AMP&#39;.</span>
<span class="sd">        ix_crop (list, optional): List of minimum and maximum inline and crossline to output.</span>
<span class="sd">            Has the form &#39;[min_il, max_il, min_xl, max_xl]&#39;. Ignored for 2D data.</span>
<span class="sd">        cdp_crop (list, optional): List of minimum and maximum cmp values to output.</span>
<span class="sd">            Has the form &#39;[min_cmp, max_cmp]&#39;. Ignored for 3D data.</span>
<span class="sd">        xy_crop (list, optional): List of minimum and maximum cdp_x and cdp_y to output.</span>
<span class="sd">            Has the form &#39;[min_x, max_x, min_y, max_y]&#39;. Ignored for 2D data.</span>
<span class="sd">        z_crop (list, optional): List of minimum and maximum vertical samples to output.</span>
<span class="sd">            Has the form &#39;[min, max]&#39;.</span>
<span class="sd">        return_geometry (bool, optional): If true returns an xarray.dataset which doesn&#39;t contain data but mirrors</span>
<span class="sd">            the input volume header information.</span>
<span class="sd">        silent (bool): Disable progress bar.</span>
<span class="sd">        extra_byte_fields (list/mapping): A list of int or mapping of byte fields that should be returned as variables in the dataset.a</span>
<span class="sd">        **segyio_kwargs: Extra keyword arguments for segyio.open</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">warn</span><span class="p">(</span>
        <span class="s2">&quot;segy_converter will be removed in v0.6, please use Xarray engine ds = xr.open_dataset(file) and then accessor ds.seisio.to_segy method instead.&quot;</span><span class="p">,</span>
        <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="c1"># Input sanity checks</span>
    <span class="n">extra_byte_fields</span> <span class="o">=</span> <span class="n">_loader_converter_checks</span><span class="p">(</span><span class="n">cdp</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">xline</span><span class="p">,</span> <span class="n">extra_byte_fields</span><span class="p">)</span>
    <span class="n">byte_loc</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">bytel</span>
        <span class="k">for</span> <span class="n">bytel</span> <span class="ow">in</span> <span class="p">[</span><span class="n">cdp</span><span class="p">,</span> <span class="n">iline</span><span class="p">,</span> <span class="n">xline</span><span class="p">,</span> <span class="n">cdp_x</span><span class="p">,</span> <span class="n">cdp_y</span><span class="p">,</span> <span class="n">offset</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">bytel</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">]</span>
    <span class="n">check_tracefield</span><span class="p">(</span><span class="n">byte_loc</span><span class="p">)</span>

    <span class="n">head_df</span><span class="p">,</span> <span class="n">head_bin</span><span class="p">,</span> <span class="n">head_loc</span> <span class="o">=</span> <span class="n">_loader_converter_header_handling</span><span class="p">(</span>
        <span class="n">segyfile</span><span class="p">,</span>
        <span class="n">cdp</span><span class="o">=</span><span class="n">cdp</span><span class="p">,</span>
        <span class="n">iline</span><span class="o">=</span><span class="n">iline</span><span class="p">,</span>
        <span class="n">xline</span><span class="o">=</span><span class="n">xline</span><span class="p">,</span>
        <span class="n">cdp_x</span><span class="o">=</span><span class="n">cdp_x</span><span class="p">,</span>
        <span class="n">cdp_y</span><span class="o">=</span><span class="n">cdp_y</span><span class="p">,</span>
        <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
        <span class="n">vert_domain</span><span class="o">=</span><span class="n">vert_domain</span><span class="p">,</span>
        <span class="n">data_type</span><span class="o">=</span><span class="n">data_type</span><span class="p">,</span>
        <span class="n">ix_crop</span><span class="o">=</span><span class="n">ix_crop</span><span class="p">,</span>
        <span class="n">cdp_crop</span><span class="o">=</span><span class="n">cdp_crop</span><span class="p">,</span>
        <span class="n">xy_crop</span><span class="o">=</span><span class="n">xy_crop</span><span class="p">,</span>
        <span class="n">z_crop</span><span class="o">=</span><span class="n">z_crop</span><span class="p">,</span>
        <span class="n">return_geometry</span><span class="o">=</span><span class="n">return_geometry</span><span class="p">,</span>
        <span class="n">silent</span><span class="o">=</span><span class="n">Progress</span><span class="o">.</span><span class="n">silent</span><span class="p">(),</span>
        <span class="n">extra_byte_fields</span><span class="o">=</span><span class="n">extra_byte_fields</span><span class="p">,</span>
        <span class="n">optimised_load</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;header_loaded&quot;</span><span class="p">)</span>
    <span class="n">common_args</span> <span class="o">=</span> <span class="p">(</span><span class="n">segyfile</span><span class="p">,</span> <span class="n">head_df</span><span class="p">,</span> <span class="n">head_bin</span><span class="p">,</span> <span class="n">head_loc</span><span class="p">)</span>

    <span class="n">common_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
        <span class="n">zcrop</span><span class="o">=</span><span class="n">z_crop</span><span class="p">,</span>
        <span class="n">ncfile</span><span class="o">=</span><span class="n">ncfile</span><span class="p">,</span>
        <span class="n">vert_domain</span><span class="o">=</span><span class="n">vert_domain</span><span class="p">,</span>
        <span class="n">data_type</span><span class="o">=</span><span class="n">data_type</span><span class="p">,</span>
        <span class="n">return_geometry</span><span class="o">=</span><span class="n">return_geometry</span><span class="p">,</span>
        <span class="n">silent</span><span class="o">=</span><span class="n">Progress</span><span class="o">.</span><span class="n">silent</span><span class="p">(),</span>
    <span class="p">)</span>

    <span class="c1"># 3d data needs iline and xline</span>
    <span class="k">if</span> <span class="n">iline</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">xline</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;is_3d&quot;</span><span class="p">)</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">_3dsegy_loader</span><span class="p">(</span>
            <span class="o">*</span><span class="n">common_args</span><span class="p">,</span>
            <span class="o">**</span><span class="n">common_kwargs</span><span class="p">,</span>
            <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">indexer</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;il_index&quot;</span><span class="p">,</span> <span class="s2">&quot;xl_index&quot;</span><span class="p">]</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">DimensionKeyField</span><span class="o">.</span><span class="n">threed_head</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="n">DimensionKeyField</span><span class="o">.</span><span class="n">threed_ps_head</span>
        <span class="p">)</span>
        <span class="n">is3d2d</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># 2d data</span>
    <span class="k">elif</span> <span class="n">cdp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">_2dsegy_loader</span><span class="p">(</span><span class="o">*</span><span class="n">common_args</span><span class="p">,</span> <span class="o">**</span><span class="n">common_kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">)</span>
        <span class="n">indexer</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;cdp_index&quot;</span><span class="p">]</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">DimensionKeyField</span><span class="o">.</span><span class="n">twod_head</span>
            <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="kc">None</span>
            <span class="k">else</span> <span class="n">DimensionKeyField</span><span class="o">.</span><span class="n">twod_ps_head</span>
        <span class="p">)</span>
        <span class="n">is3d2d</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># fallbak to just a 2d array of traces</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">_2dsegy_loader</span><span class="p">(</span><span class="o">*</span><span class="n">common_args</span><span class="p">,</span> <span class="o">**</span><span class="n">common_kwargs</span><span class="p">,</span> <span class="o">**</span><span class="n">segyio_kwargs</span><span class="p">)</span>
        <span class="n">indexer</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">dims</span> <span class="o">=</span> <span class="n">DimensionKeyField</span><span class="o">.</span><span class="n">cdp_2d</span>
        <span class="n">is3d2d</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">indexer</span> <span class="o">=</span> <span class="n">indexer</span> <span class="o">+</span> <span class="p">[</span><span class="s2">&quot;off_index&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">indexer</span>

    <span class="n">ds</span> <span class="o">=</span> <span class="n">_loader_converter_write_headers</span><span class="p">(</span>
        <span class="n">ds</span><span class="p">,</span> <span class="n">head_df</span><span class="p">,</span> <span class="n">indexer</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="n">extra_byte_fields</span><span class="p">,</span> <span class="n">is3d2d</span><span class="o">=</span><span class="n">is3d2d</span>
    <span class="p">)</span>
    <span class="n">new_vars</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="n">ds</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">extra_byte_fields</span><span class="p">}</span>
    <span class="n">ds</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">del</span> <span class="n">ds</span>

    <span class="k">with</span> <span class="n">h5netcdf</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">ncfile</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">seisnc</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">var</span><span class="p">,</span> <span class="n">darray</span> <span class="ow">in</span> <span class="n">new_vars</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">seisnc_var</span> <span class="o">=</span> <span class="n">seisnc</span><span class="o">.</span><span class="n">create_variable</span><span class="p">(</span>
                <span class="n">var</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="n">darray</span><span class="o">.</span><span class="n">dims</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">darray</span><span class="o">.</span><span class="n">dtype</span>
            <span class="p">)</span>
            <span class="n">seisnc_var</span><span class="p">[</span><span class="o">...</span><span class="p">]</span> <span class="o">=</span> <span class="n">darray</span><span class="p">[</span><span class="o">...</span><span class="p">]</span>
            <span class="n">seisnc</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="segysak.segy.well_known_byte_locs" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">well_known_byte_locs</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

      <p>Return common bytes position kwargs_dict for segy_loader and segy_converter.</p>
<p>Returns a dict containing the byte locations for well known SEG-Y variants in the wild.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code>name</code></td>
            <td>
                  <code>str</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Takes one of keys from KNOWN_BYTES</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>dict</code></td>            <td>
            </td>
            <td>
              <div class="doc-md-description">
                <p>A dictionary of SEG-Y byte positions.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>
      <p>Example:</p>
<p>Use the output of this function to unpack arguments into <code>segy_loader</code></p>
<blockquote>
<blockquote>
<blockquote>
<p>seismic = segy_loader(filepath, **well_known_byte_locs('petrel_3d'))</p>
</blockquote>
</blockquote>
</blockquote>

            <details class="quote">
              <summary>Source code in <code>segysak/segy/_segy_loader.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Python</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">696</span>
<span class="normal">697</span>
<span class="normal">698</span>
<span class="normal">699</span>
<span class="normal">700</span>
<span class="normal">701</span>
<span class="normal">702</span>
<span class="normal">703</span>
<span class="normal">704</span>
<span class="normal">705</span>
<span class="normal">706</span>
<span class="normal">707</span>
<span class="normal">708</span>
<span class="normal">709</span>
<span class="normal">710</span>
<span class="normal">711</span>
<span class="normal">712</span>
<span class="normal">713</span>
<span class="normal">714</span>
<span class="normal">715</span>
<span class="normal">716</span>
<span class="normal">717</span>
<span class="normal">718</span>
<span class="normal">719</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">well_known_byte_locs</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return common bytes position kwargs_dict for segy_loader and segy_converter.</span>

<span class="sd">    Returns a dict containing the byte locations for well known SEG-Y variants in the wild.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Takes one of keys from KNOWN_BYTES</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary of SEG-Y byte positions.</span>

<span class="sd">    Example:</span>

<span class="sd">    Use the output of this function to unpack arguments into ``segy_loader``</span>

<span class="sd">    &gt;&gt;&gt; seismic = segy_loader(filepath, **well_known_byte_locs(&#39;petrel_3d&#39;))</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">KNOWN_BYTES</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;No byte locatons for </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">, select from </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="n">KNOWN_BYTES</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Tony Hallam
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigations.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "content.action.edit", "content.action.view", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>